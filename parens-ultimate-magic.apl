⍝ obviously, I did not write this. It is very cool. 
((,∘⍉1@3)⊢⍤/(,∘⍉'('⍪')'⍪2↓⊢)){(((,⊢∨¯1⌽⊢)' '≠⍵)/,⍵)⍪⍨((+/⊢∨¯1⌽⊢)' '≠⍵)((∊0⌈↑¨),[.5](-⍤∊0⌊⌽⍤↑¨))2-⍨/1,⍨(∪⍳⊢)+/∧\' '=⍵}' ',⍨↑(','∘≠⊆⊢)'if, flag, + 1,   2, other,k'

 sim↑'if' '  flag' '  + 1' '    2' 'other'